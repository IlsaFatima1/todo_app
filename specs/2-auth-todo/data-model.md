# Data Model: Authentication for Todo Application

## Entity: User

### Fields
- **id** (Integer, Primary Key, Auto-increment)
  - Unique identifier for each user
  - Auto-generated by the database

- **email** (String, Not Null, Unique)
  - User's email address used for authentication
  - Maximum length: 255 characters
  - Required field for all users

- **password_hash** (String, Not Null)
  - Hashed password for authentication
  - Stored securely using standard hashing algorithm
  - Required field for all users

- **created_at** (DateTime, Not Null)
  - Timestamp when the user account was created
  - Automatically set to current time for new records

- **updated_at** (DateTime, Not Null)
  - Timestamp when the user account was last modified
  - Automatically updated when record is changed

- **last_login_at** (DateTime, Nullable)
  - Timestamp of the user's last login
  - Updated on successful authentication

### Relationships
- **todos** (One-to-Many relationship to Todo entities)
  - Links to todos created by this user
  - Enables user-scoped data access

### Validation Rules
- Email must be valid and unique across all users
- Password hash must be properly formatted
- created_at and updated_at are automatically managed by the system
- Email cannot be changed after account creation

### State Transitions
- **New User**: created_at and updated_at set to current time, last_login_at null initially
- **Login**: last_login_at updated to current time
- **Account Update**: updated_at updated to current time, other fields may change

## Entity: Todo (Updated)

### Fields (in addition to existing fields)
- **user_id** (Integer, Not Null, Foreign Key)
  - Links the todo to the user who created it
  - Required field for all todos after authentication implementation

### Updated Relationships
- **user** (Many-to-One relationship to User entity)
  - Links to the user who owns this todo
  - Enables user-scoped data access

### Updated Validation Rules
- Todos can only be accessed by the user who created them
- user_id is required for all new todos
- Users can only modify their own todos

## Entity: Authentication Token (Handled by Better Auth)

### Components
- **Token**: Secure token that verifies user identity
- **Expiration**: Time limit for token validity
- **User Association**: Links token to specific user
- **Session Management**: Handles user session state

### Configuration
- Token type: JWT (JSON Web Token) or Better Auth default
- Expiration time: Configured based on security requirements
- Refresh mechanism: Automatic refresh when needed